services:
  - type: web
    name: payit-backend
    # Ensure Render uses the `backend` folder as the service root so it finds package.json
    root: backend
    env: node
    plan: free
    region: oregon
    # Use npm's --prefix so Render runs install/start in the backend folder
    # regardless of the configured service root. This avoids ENOENT errors
    # when Render attempts to run npm in the wrong directory.
    buildCommand: npm --prefix backend install
    startCommand: npm --prefix backend start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "3000"
databases:
  - name: payit-db
    engine: postgres
    plan: starter

# After pushing this repo to GitHub, create a new Render service
# and Render will use this manifest for deploy configuration.
